!function(e,r){"function"==typeof define&&define.amd?define(["ScrollMagic"],r):r("object"==typeof exports?require("scrollmagic"):e.ScrollMagic||e.jQuery&&e.jQuery.ScrollMagic)}(this,function(e){"use strict";var r="debug.addIndicators",t=window.console||{},o=Function.prototype.bind.call(t.error||t.log||function(){},t);e||o("("+r+") -> ERROR: The ScrollMagic main module could not be found. Please make sure it's loaded before this plugin or use an asynchronous loader like requirejs.");var i="0.85em",n="9999",s=15,d=e._util,a=0;e.Scene.extend(function(){var e=this,t,o=function(){e._log&&(Array.prototype.splice.call(arguments,1,0,"("+r+")","->"),e._log.apply(this,arguments))};e.addIndicators=function(r){if(!t){var o={name:"",indent:0,parent:void 0,colorStart:"green",colorEnd:"red",colorTrigger:"blue"};r=d.extend({},o,r),a++,t=new g(e,r),e.on("add.plugin_addIndicators",t.add),e.on("remove.plugin_addIndicators",t.remove),e.on("destroy.plugin_addIndicators",e.removeIndicators),e.controller()&&t.add()}return e},e.removeIndicators=function(){return t&&(t.remove(),this.off("*.plugin_addIndicators"),t=void 0),e}}),e.Controller.addOption("addIndicators",!1),e.Controller.extend(function(){var t=this,o=t.info(),i=o.container,n=o.isDocument,a=o.vertical,g={groups:[]},l=function(){t._log&&(Array.prototype.splice.call(arguments,1,0,"("+r+")","->"),t._log.apply(this,arguments))};t._indicators&&l(2,"WARNING: Scene already has a property '_indicators', which will be overwritten by plugin."),this._indicators=g;var p=function(){g.updateBoundsPositions()},c=function(){g.updateTriggerGroupPositions()};return i.addEventListener("resize",c),n||(window.addEventListener("resize",c),window.addEventListener("scroll",c)),i.addEventListener("resize",p),i.addEventListener("scroll",p),this._indicators.updateBoundsPositions=function(e){for(var r=e?[d.extend({},e.triggerGroup,{members:[e]})]:g.groups,t=r.length,o={},n=a?"left":"top",l=a?"width":"height",p=a?d.get.scrollLeft(i)+d.get.width(i)-s:d.get.scrollTop(i)+d.get.height(i)-s,c,u,f;t--;)for(f=r[t],c=f.members.length,u=d.get[l](f.element.firstChild);c--;)o[n]=p-u,d.css(f.members[c].bounds,o)},this._indicators.updateTriggerGroupPositions=function(e){for(var r=e?[e]:g.groups,o=r.length,l=n?document.body:i,p=n?{top:0,left:0}:d.get.offset(l,!0),c=a?d.get.width(i)-s:d.get.height(i)-s,u=a?"width":"height",f=a?"Y":"X",m,h,v,b,G;o--;)m=r[o],h=m.element,v=m.triggerHook*t.info("size"),b=d.get[u](h.firstChild.firstChild),G=v>b?"translate"+f+"(-100%)":"",d.css(h,{top:p.top+(a?v:c-m.members[0].options.indent),left:p.left+(a?c-m.members[0].options.indent:v)}),d.css(h.firstChild.firstChild,{"-ms-transform":G,"-webkit-transform":G,transform:G})},this._indicators.updateTriggerGroupLabel=function(e){var r="trigger"+(e.members.length>1?"":" "+e.members[0].options.name),t=e.element.firstChild.firstChild,o=t.textContent!==r;o&&(t.textContent=r,a&&g.updateBoundsPositions())},this.addScene=function(r){this._options.addIndicators&&r instanceof e.Scene&&r.controller()===t&&r.addIndicators(),this.$super.addScene.apply(this,arguments)},this.destroy=function(){i.removeEventListener("resize",c),n||(window.removeEventListener("resize",c),window.removeEventListener("scroll",c)),i.removeEventListener("resize",p),i.removeEventListener("scroll",p),this.$super.destroy.apply(this,arguments)},t});var g=function(e,t){var o=this,i=l.bounds(),n=l.start(t.colorStart),s=l.end(t.colorEnd),g=t.parent&&d.get.elements(t.parent)[0],p,c,u=function(){e._log&&(Array.prototype.splice.call(arguments,1,0,"("+r+")","->"),e._log.apply(this,arguments))};t.name=t.name||a,n.firstChild.textContent+=" "+t.name,s.textContent+=" "+t.name,i.appendChild(n),i.appendChild(s),o.options=t,o.bounds=i,o.triggerGroup=void 0,this.add=function(){c=e.controller(),p=c.info("vertical");var r=c.info("isDocument");g||(g=r?document.body:c.info("container")),r||"static"!==d.css(g,"position")||d.css(g,{position:"relative"}),e.on("change.plugin_addIndicators",m),e.on("shift.plugin_addIndicators",f),_(),b(),setTimeout(function(){c._indicators.updateBoundsPositions(o)},0),u(3,"added indicators")},this.remove=function(){if(o.triggerGroup){if(e.off("change.plugin_addIndicators",m),e.off("shift.plugin_addIndicators",f),o.triggerGroup.members.length>1){var r=o.triggerGroup;r.members.splice(r.members.indexOf(o),1),c._indicators.updateTriggerGroupLabel(r),c._indicators.updateTriggerGroupPositions(r),o.triggerGroup=void 0}else w();v(),u(3,"removed indicators")}};var f=function(){b()},m=function(e){"triggerHook"===e.what&&_()},h=function(){var e=c.info("vertical");d.css(n.firstChild,{"border-bottom-width":e?1:0,"border-right-width":e?0:1,bottom:e?-1:t.indent,right:e?t.indent:-1,padding:e?"0 8px":"2px 4px"}),d.css(s,{"border-top-width":e?1:0,"border-left-width":e?0:1,top:e?"100%":"",right:e?t.indent:"",bottom:e?"":t.indent,left:e?"":"100%",padding:e?"0 8px":"2px 4px"}),g.appendChild(i)},v=function(){i.parentNode.removeChild(i)},b=function(){i.parentNode!==g&&h();var r={};r[p?"top":"left"]=e.triggerPosition(),r[p?"height":"width"]=e.duration(),d.css(i,r),d.css(s,{display:e.duration()>0?"":"none"})},G=function(){var r=l.trigger(t.colorTrigger),i={};i[p?"right":"bottom"]=0,i[p?"border-top-width":"border-left-width"]=1,d.css(r.firstChild,i),d.css(r.firstChild.firstChild,{padding:p?"0 8px 3px 8px":"3px 4px"}),document.body.appendChild(r);var n={triggerHook:e.triggerHook(),element:r,members:[o]};c._indicators.groups.push(n),o.triggerGroup=n,c._indicators.updateTriggerGroupLabel(n),c._indicators.updateTriggerGroupPositions(n)},w=function(){c._indicators.groups.splice(c._indicators.groups.indexOf(o.triggerGroup),1),o.triggerGroup.element.parentNode.removeChild(o.triggerGroup.element),o.triggerGroup=void 0},_=function(){var r=e.triggerHook(),t=1e-4;if(!(o.triggerGroup&&Math.abs(o.triggerGroup.triggerHook-r)<t)){for(var i=c._indicators.groups,n,s=i.length;s--;)if(n=i[s],Math.abs(n.triggerHook-r)<t)return o.triggerGroup&&(1===o.triggerGroup.members.length?w():(o.triggerGroup.members.splice(o.triggerGroup.members.indexOf(o),1),c._indicators.updateTriggerGroupLabel(o.triggerGroup),c._indicators.updateTriggerGroupPositions(o.triggerGroup))),n.members.push(o),o.triggerGroup=n,void c._indicators.updateTriggerGroupLabel(n);if(o.triggerGroup){if(1===o.triggerGroup.members.length)return o.triggerGroup.triggerHook=r,void c._indicators.updateTriggerGroupPositions(o.triggerGroup);o.triggerGroup.members.splice(o.triggerGroup.members.indexOf(o),1),c._indicators.updateTriggerGroupLabel(o.triggerGroup),c._indicators.updateTriggerGroupPositions(o.triggerGroup),o.triggerGroup=void 0}G()}}},l={start:function(e){var r=document.createElement("div");r.textContent="start",d.css(r,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e});var t=document.createElement("div");return d.css(t,{position:"absolute",overflow:"visible",width:0,height:0}),t.appendChild(r),t},end:function(e){var r=document.createElement("div");return r.textContent="end",d.css(r,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e}),r},bounds:function(){var e=document.createElement("div");return d.css(e,{position:"absolute",overflow:"visible","white-space":"nowrap","pointer-events":"none","font-size":i}),e.style.zIndex=n,e},trigger:function(e){var r=document.createElement("div");r.textContent="trigger",d.css(r,{position:"relative"});var t=document.createElement("div");d.css(t,{position:"absolute",overflow:"visible","border-width":0,"border-style":"solid",color:e,"border-color":e}),t.appendChild(r);var o=document.createElement("div");return d.css(o,{position:"fixed",overflow:"visible","white-space":"nowrap","pointer-events":"none","font-size":i}),o.style.zIndex=n,o.appendChild(t),o}}});